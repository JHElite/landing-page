---
import { Image } from "astro:assets";
import { getEntry } from "astro:content";
import type { Banner, ContentSection } from "../content/types";
import { getManagedImage } from "../helpers/media";
import Markdown from "./common/markdown.astro";
import PageSection from "./common/page-section.astro";

const {
  data: { slogan, image },
} = (await getEntry("home-page", "banner")) as ContentSection<Banner>;
---

<PageSection class="banner-section flex items-center">
  <Markdown content={slogan} noMarginY />
  <!-- TODO: test img -->
  {
    !!image && (
      <Image
        class="w-full h-full object-cover z-10 img-fade-in"
        src={getManagedImage(image.src)}
        alt={image.alt}
        loading="eager"
      />
    )
  }
</PageSection>

<style is:global>
  :root {
    --banner-pb: 12rem;
  }
</style>

<style>
  .banner-section {
    width: 100%;

    @apply pb-[var(--banner-pb)] pt-[calc(var(--banner-pb)/2)];

    .markdown {
      & * {
        @apply font-title leading-tight text-[2.75rem] sm:text-[3.5rem] md:text-[4.5rem] lg:text-[6rem] motion-safe:transition-[font-size];
      }
      strong {
        @apply text-empty;
      }
    }
  }
</style>
